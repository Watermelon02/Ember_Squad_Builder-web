@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;800&family=JetBrains+Mono:wght@400;700&display=swap");

.part-card {
  width: 25vh;
  height: 36vh;
  position: relative;
  border-radius: 1.0625vh;
  overflow: hidden;
  font-family: "Inter", system-ui, sans-serif;
  box-shadow: 0 1.7vh 2.55vh -0.425vh rgba(0, 0, 0, 0.1),
    0 0.85vh 1.275vh -0.85vh rgba(0, 0, 0, 0.05),
    0 0 0 0.425vh rgba(0, 0, 0, 0.05) inset;
  color: #334155;
  background-size: 100% 100%, 1.7vh 1.7vh, 1.7vh 1.7vh, 1.7vh 1.7vh, 1.7vh 1.7vh;
  background-position: 0 0, 0 0, 0 0, 0.85vh 0.85vh, 0.85vh 0.85vh;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.part-card-background-gof {
  background-image: linear-gradient(
    to bottom,
    rgb(232, 232, 128) 0%,
    rgb(240, 240, 170) 30%,
    rgb(243, 243, 225) 60%,
    rgb(245, 245, 238) 85%,
    rgb(255, 255, 255) 100%
  );
}

.part-card-background-un {
  background-image: linear-gradient(
    to bottom,
    rgb(112, 130, 191) 0%,
    rgb(123, 143, 196) 15%,
    rgb(142, 160, 205) 28%,
    rgb(176, 191, 218) 40%,
    rgb(182, 202, 219) 50%,
    rgb(231, 232, 238) 70%,
    rgb(255, 255, 255) 100%
  );
}

.part-card-background-pd {
  background-image: linear-gradient(
    to bottom,
    rgb(214, 214, 214) 0%,

    rgb(255, 255, 255) 100%
  );
}

.part-card-background-rdl {
  background-image: linear-gradient(
    to bottom,
    rgb(234, 107, 115) 0%,
    rgb(232, 140, 136) 25%,
    rgb(223, 200, 185) 50%,
    rgb(236, 234, 233) 75%,
    rgb(255, 255, 255) 100%
  );
}

.card-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.card-content {
  position: relative;
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-columns: 15% 1fr 25%;
  grid-template-rows: 5.1vh 1fr auto;
  padding: 1.4875vh 1.68vh;
  box-sizing: border-box;
}

.left-name {
  position: absolute;
  z-index: 1;
  top: 1.6vh;
  left: 1vh;
  max-height: 15vh;
  writing-mode: vertical-rl;
  text-orientation: mixed;
  font-size: 1.2vh;
  font-weight: 800;
  text-transform: uppercase;
  letter-spacing: 0.255vh;
  margin-top: 1.2vh;
  color: #ffffff;
  background: rgba(0, 0, 0, 0.1);
  border-radius: 0.5vh;
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  height: auto;
  width: auto;
}

.top-stats {
  grid-column: 2 / span 2;
  grid-row: 1;
  display: flex;
  justify-content: flex-end;
  align-items: flex-start;
}

.stat-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 2.5vh;
  height: 2.5vh;
  border-radius: 0.6375vh;
  position: relative;
  overflow: hidden;
  transition: transform 0.2s;
}

.stat-box-structure {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 1.6vh;
  height: 1.6vh;
  border-radius: 0.4vh;
  position: relative;
  overflow: hidden;
  transition: transform 0.2s;
}

.stat-box:hover {
  transform: translateY(-0.085vh);
}

.part-stat-armor {
  background: rgba(182, 182, 182, 0.6);
  color: #ffffff;
}

.part-stat-structure {
  background: rgba(0, 0, 0, 1);
  color: #0f172a;
}

.part-stat-number-armor {
  font-size: 1.87vh;
  font-weight: 800;
  line-height: 1;
  color: white;
}
.part-stat-number-structure {
  font-size: 1.3vh;
  font-weight: 800;
  line-height: 1;
  color: white;
}

.part-stat-number-armor {
  padding-left: 1vh;
}

.right-stats {
  grid-column: 3;
  grid-row: 2;
  position: relative;
  display: flex;
  justify-content: center;
}

.right-grid-bg {
  position: absolute;
  top: 0vh;
  left: 50%;
  transform: translateX(-50%);
  opacity: 0.4;
  display: block;
  pointer-events: none;
  --s: 1.4vh;
  width: calc(3 * var(--s));
  height: 75%;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1455 1455' width='1455' height='1455'%3E%3Crect x='0' y='0' width='1200' height='1062.5' rx='255' ry='255' fill='rgba(63, 63, 63, 0.3)' stroke='rgba(63, 63, 63, 0.3)' stroke-width='42.5'/%3E%3C/svg%3E");
  background-size: var(--s) var(--s);
  background-repeat: repeat;
  background-position: 0 0;
}

.right-stats-values {
  position: relative;
  display: flex;
  flex-direction: column;

  align-items: center;
  width: 100%;
  margin-top: 0.425vh;
}

.stat-value {
  font-size: 2vh;
  font-weight: 800;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.2125vh;
  width: 100%;
  filter: drop-shadow(0 0.85px 1.7px rgba(0, 0, 0, 0.05));
}

.stat-value-icon {
  opacity: 1;
  height: 2.5vh;
}

.stat-value-icon-armor {
  position: absolute;
  top: 0vh;
  left: 0vh;
  width: 1.4vh;
  height: 1.4vh;
}

.dodge-value {
  color: #0ea5e9;
}
.electronic-value {
  color: #eab308;
}

.type-label {
  grid-column: 3;
  grid-row: 3;
  display: flex;
  align-items: flex-end;
  justify-content: flex-end;
  font-size: 1.02vh;
  text-transform: uppercase;
  color: #94a3b8;
  font-weight: 700;
  letter-spacing: 0.0425vh;
  padding-bottom: 0.425vh;
  font-family: "JetBrains Mono", monospace;
}

.action-list {
  grid-column: 1 / span 3;
  grid-row: 3;
  display: flex;
  flex-direction: row;
  align-items: flex-start;
  gap: 0.85vh;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 0.85vh;
  backdrop-filter: blur(6.8px);
  border: 0.425px solid rgba(255, 255, 255, 0.5);
  padding: 0.51vh;
  overflow: hidden;
}

.action-item {
  display: flex;
  flex-direction: column;
  gap: 0.1vh;
  border-radius: 0.51vh;
  transition: background-color 0.2s, transform 0.2s;
}

.action-item:hover {
  transform: translateX(0.085vh);
}

.action-row-1 {
  display: flex;
  align-items: center;
  background-color: rgb(255, 255, 255);
}

.action-type-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 2.4vh;
  color: #64748b;
}

/* --- 原有样式 (保留用于 sizeCount === 1 的情况) --- */

.action-size-container.vertical {
  display: flex;
  flex-direction: column;
  justify-content: center;
  /* 优化：将 vh 替换为 rem/px 以提高性能，这里先保持 vh */
  padding: 0.4vh 0.24vh;
  background-color: rgb(241, 236, 243);
  border: 1px solid black;
  border-radius: 0.3vh;
}

.size-square-black {
  width: 0.5vh;
  height: 0.5vh;
  background-color: #334155;
  border: 0.425px solid #cbd5e1;
  border-radius: 0.085vh;
  box-shadow: 0 0.425px 0.85px rgba(0, 0, 0, 0.1);
}

.size-square-white {
  width: 0.5vh;
  height: 0.5vh;
  background-color: white;
  border: 0.425px solid #cbd5e1;
  border-radius: 0.085vh;
  box-shadow: 0 0.425px 0.85px rgba(0, 0, 0, 0.1);
}

/* --- 核心优化样式 (用于 sizeCount > 1 的情况) --- */

.size-visual-many-squares {
  /* 定义方块尺寸变量 */
  --s-h: 0.5vh;
  --s-b: 0.425px; /* 方块边框宽度 */
  --g-h: calc(var(--s-h) * 0.2); /* 假设方块之间有 20% 的间隙 */

  /* 总高度计算：(方块高度 + 间隙) * 数量 - 间隙 */
  height: calc((var(--s-h) + var(--g-h)) * var(--count) - var(--g-h));
  width: var(--s-h);

  /* 渐变模拟方块堆叠 */
  background-image: repeating-linear-gradient(
    to bottom,
    /* 模拟方块背景色 */ #334155,
    #334155 calc(var(--s-h) - var(--s-b)),
    /* 模拟方块边框色（可选，如果不想模拟边框可移除） */ #cbd5e1
      calc(var(--s-h) - var(--s-b)),
    #cbd5e1 var(--s-h),
    /* 模拟方块间隙 */ transparent var(--s-h),
    transparent calc(var(--s-h) + var(--g-h))
  );

  /* 设置渐变重复的周期大小 */
  background-size: 100% calc(var(--s-h) + var(--g-h));

  /* 添加圆角和阴影来模拟方块的视觉效果 */
  border-radius: 0.085vh;
  box-shadow: 0 0.425px 0.85px rgba(0, 0, 0, 0.1);
}

.action-name {
  flex: 1;
  padding: 0.34vh 0.72vh;
  font-size: 1.19vh;
  font-weight: 800;
  color: white;
  border-radius: 0.425vh;
  text-transform: uppercase;
  letter-spacing: 0.02125vh;
  box-shadow: 0 0.2125vh 0.425vh rgba(0, 0, 0, 0.1),
    inset 0 0.425px 0 rgba(255, 255, 255, 0.2);
  text-shadow: 0 0.425px 0.85px rgba(0, 0, 0, 0.2);
}

.action-row-2 {
  display: flex;
  align-items: flex-start;
}

.action-content-left {
  width: 4;
  display: flex;
  flex-direction: column;
  gap: 0.2vh;
  align-items: left;
  padding-top: 0.085vh;
}

.range-badge {
  display: flex;
  border-radius: 0.34vh;
  overflow: hidden;
  box-shadow: 0 0.085vh 0.2125vh rgba(0, 0, 0, 0.1);
  height: 1.5vh;
  width: 100%;
  border: 0.425px solid rgba(0, 0, 0, 0.05);
}

.range-label {
  background-color: #ffffff;
  color: #0f172a;
  padding: 0 0.48vh;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1.19vh;
  border-right: 0.425px solid #f1f5f9;
}

.range-value {
  flex: 1;
  background-color: #0f172a;
  color: #ffffff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 800;
  font-size: 1.19vh;
  font-family: "JetBrains Mono", monospace;
}

.range-value.striped {
  background: repeating-linear-gradient(
    45deg,
    #0f172a,
    #0f172a 0.1275vh,
    #334155 0.1275vh,
    #334155 0.255vh
  );
}

.storage-row {
  display: flex;
  gap: 0.17vh;
  justify-content: center;
  align-items: center;
  background-color: #000000;
  margin: 0.2vh;
  padding: 0.3vh;
  border-radius: 0.3vh;
}

.storage-icon-svg {
  color: #ffffff;
  filter: drop-shadow(0 0.425px 0.85px rgba(0, 0, 0, 0.1));
}

.dice-row {
  display: flex;
  justify-content: left;
}

.skeuomorphic-dice {
  width: 0.96vh;
  height: 0.85vh;
  border-radius: 0.2125vh;
  position: relative;
  box-shadow: 0 0.17vh 0.34vh rgba(0, 0, 0, 0.15),
    0 0.0425vh 0.085vh rgba(0, 0, 0, 0.1);
}

.skeuomorphic-dice::after {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 0.2125vh;
  background: radial-gradient(
    circle at 30% 30%,
    rgba(255, 255, 255, 0.6),
    transparent 70%
  );
}

.dice-red {
  background: linear-gradient(135deg, #ef4444 0%, #b91c1c 100%);
  border: 0.425px solid #991b1b;
}

.dice-yellow {
  background: linear-gradient(135deg, #facc15 0%, #a16207 100%);
  border: 0.425px solid #854d0e;
}

.action-description {
  flex: 1;
  position: relative;
  overflow: hidden;
  border-radius: 0.34vh;
  display: flex;
  flex-direction: column;
}

.description-text {
  font-size: 1.105vh;
  color: #334155;
  position: relative;
}

.action-description::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: repeating-linear-gradient(
    -45deg,
    rgba(255, 255, 255, 1) 0,
    rgba(255, 255, 255, 1) 0.3vh,
    rgba(255, 255, 255, 0.1) 0.3vh,
    rgba(255, 255, 255, 0.1) 0.6vh
  );
}

.action-items-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.425vh;
}

.absolute-part-info,
.absolute-logo-info,
.absolute-throw-info {
  position: absolute;
  grid-row: 3;
  grid-column: 1 / span 3;
}

.action-part-icon-top {
  top: -4vh;
  right: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: all;
}

.part-letter-badge {
  width: 1.6vh;
  height: 2.6vh;
  background-color: #0f172a;
  color: white;
  border-top-left-radius: 0.3vh;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8vh;
  font-weight: 800;
  font-family: "JetBrains Mono", monospace;
  text-transform: uppercase;
  box-shadow: 0 0.425px 0.85px rgba(0, 0, 0, 0.2);
}

.absolute-logo-info {
  top: 0vh;
  left: 0vh;
}

.throw-status {
  top: -6vh;
  right: 0vh;
  font-size: 0.935vh;
  font-weight: 700;
  text-transform: uppercase;
  font-family: "JetBrains Mono", monospace;
  padding: 0.1vh 0.4vh;
  border-radius: 0.3vh;
  background-color: rgba(0, 0, 0, 1);
  color: #ffffff;
  border: 0.425px solid rgba(5, 150, 105, 0.2);
  pointer-events: all;
}

/* Image Wrappers and Animations */
.part-main-image-wrapper,
.part-main-image-wrapper-hand,
.part-main-image-wrapper-torso,
.part-main-image-wrapper-chasis {
  position: absolute;
  width: 70%;
  height: 70%;
  z-index: 1;
  opacity: 0;
  filter: grayscale(100%) brightness(1.1)
    drop-shadow(0 0 1vh rgba(0, 0, 0, 0.1));
}

/* Specific Positioning */
.part-main-image-wrapper {
  top: 40%;
  left: 50%;
  width: 80%;
  height: 80%;
  animation: partImageSlideIn 0.5s cubic-bezier(0.2, 0.8, 0.5, 1) forwards;
}
.part-main-image-wrapper-hand {
  top: 40%;
  left: 50%;
  animation: partImageSlideInHand 0.4s ease-out forwards;
}
.part-main-image-wrapper-torso {
  top: 25%;
  left: 45%;
  transform: translate(-50%, -50%);
  animation: slideInTorso 0.5s ease-out 0.05s forwards;
}
.part-main-image-wrapper-chasis {
  top: 40%;
  left: 45%;
  transform: translate(-50%, -50%);
  animation: slideInChasis 0.5s ease-out 0.05s forwards;
}

/* Shadows */
.part-main-image-wrapper-shadow,
.part-main-image-wrapper-shadow-hand,
.part-main-image-wrapper-shadow-torso,
.part-main-image-wrapper-shadow-chasis {
  position: absolute;
  width: 70%;
  height: 70%;
  opacity: 0;
  filter: sepia(0.8) saturate(2.5) brightness(0.2) hue-rotate(15deg);
}

.part-main-image-wrapper-shadow {
  top: 39%;
  left: 45%;
  width: 80%;
  height: 80%;
  animation: partShadowSlideIn 0.6s cubic-bezier(0.2, 0.8, 0.5, 1) 0.1s forwards;
}
.part-main-image-wrapper-shadow-hand {
  top: 39%;
  left: 45%;
  animation: shadowSlideInHand 0.5s ease-out 0.05s forwards;
}
.part-main-image-wrapper-shadow-torso {
  top: 25%;
  left: 40%;
  animation: shadowSlideInTorso 0.5s ease-out 0.05s forwards;
}
.part-main-image-wrapper-shadow-chasis {
  top: 39%;
  left: 48%;
  animation: shadowSlideInChasis 0.5s ease-out 0.05s forwards;
}

/* Keyframes */
@keyframes partImageSlideIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -80%) scale(0.95);
  }
  100% {
    opacity: 0.8;
    transform: translate(-52%, -50%) scale(1);
  }
}
@keyframes partShadowSlideIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -45%) scale(0.9);
  }
  100% {
    opacity: 0.3;
    transform: translate(-49%, -50%) scale(1);
  }
}
@keyframes partImageSlideInHand {
  0% {
    opacity: 0;
    transform: translate(-30%, -50%) scale(0.9);
  }
  100% {
    opacity: 0.8;
    transform: translate(-50%, -50%) scale(1);
  }
}
@keyframes shadowSlideInHand {
  0% {
    opacity: 0;
    transform: translate(-60%, -50%) scale(0.9);
  }
  100% {
    opacity: 0.3;
    transform: translate(-45%, -52%) scale(1);
  }
}
@keyframes slideInTorso {
  0% {
    opacity: 0;
    transform: translate(-50%, -60%) scale(0.95);
  }
  100% {
    opacity: 0.9;
    transform: translate(-52%, -50%) scale(1);
  }
}
@keyframes shadowSlideInTorso {
  0% {
    opacity: 0;
    transform: translate(-60%, -45%) scale(1.1);
  }
  100% {
    opacity: 0.2;
    transform: translate(-49%, -50%) scale(1);
  }
}
@keyframes slideInChasis {
  0% {
    opacity: 0;
    transform: translate(-50%, -60%) scale(0.95);
  }
  100% {
    opacity: 0.9;
    transform: translate(-52%, -50%) scale(1);
  }
}
@keyframes shadowSlideInChasis {
  0% {
    opacity: 0;
    transform: translate(-60%, -45%) scale(1);
  }
  100% {
    opacity: 0.2;
    transform: translate(-62%, -46%) scale(1);
  }
}

.part-main-image,
.part-main-image-shadow {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

.chassis-move-container {
  flex-shrink: 0;
  width: auto;
  align-self: center;
}
.move-badge {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3.8vh;
  height: 3.8vh;
  background: linear-gradient(to bottom, rgb(2, 116, 174), rgb(129, 150, 161));
  color: #ffffff;
  border-radius: 0.4vh;
  font-size: 2vh;
  font-weight: 800;
  font-family: "JetBrains Mono", monospace;
  transform: none;
}

.placeholder {
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: 800;
  padding-left: 10%;
  font-size: 2.4vh;
  width: 80%;
  height: 100%;
  color: white;
  top: 0;
}
